---
import BaseLayout from "../layouts/BaseLayout.astro";

// Datos (los tuyos)
const formatos = [
  { order: 1, name: "Solicitud de PrÃ©stamo", file: "/public/formatos/Solicitud de Prestamo.pdf" },
  { order: 1, name: "Solicitud de DevoluciÃ³n", file: "/public/formatos/Solicitud de Devolucion.pdf" },
  { order: 3, name: "Solicitud de Gastos MÃ©dicos", file: "/public/formatos/Solicitud de Gastos Medicos.pdf" },
  { order: 4, name: "Solicitud de Gastos Funerarios", file: "/public/formatos/Solicitud de Gastos Funerarios.pdf" },
  { order: 5, name: "Poliza de Seguro Hogar", file: "/public/formatos/Poliza de Seguro Hogar.pdf" },
  { order: 6, name: "Solicitud de PrÃ©stamo de PÃ³liza de Seguro", file: "/public/formatos/Solicitud Prestamo de Poliza de Seguro.pdf" },
  { order: 7, name: "Solicitud de PrÃ©stamos de Desastres Naturales", file: "/public/formatos/Solicitud de Prestamos de Desastres Naturales.pdf" },
  { order: 8, name: "Solicitud de Bono para el Retiro", file: "/public/formatos/Solicitud de Bono para el Retiro.pdf" },
];

const comunicados = [
  { order: 1, name: "XXIII Asamblea Ordinaria de Representantes de Socios", file: "/public/comunicados/Comunicado 1.jpg" },
  { order: 2, name: "Comunicado Apoyos Vigentes", file: "/public/comunicados/Comunicado 2.jpg" },
  { order: 3, name: "Aviso Remanente", file: "/public/comunicados/Aviso 1.jpg" },
  { order: 4, name: "AtenciÃ³n", file: "/public/comunicados/Comunicado 3.jpg" },
  { order: 5, name: "Comunicado", file: "/public/comunicados/Comunicado 4.jpg" },
];

const asambleas = [
  { order: 1, name: "XIV Asamblea Ordinaria de CMAP", file: "/public/documentos/14.pdf" },
  { order: 2, name: "XV Asamblea Ordinaria de CMAP", file: "/public/documentos/15.pdf" },
  { order: 3, name: "XVI Asamblea Ordinaria de CMAP", file: "/public/documentos/16.pdf" },
  { order: 4, name: "XVII Asamblea Ordinaria de CMAP", file: "/public/documentos/17.pdf" },
  { order: 5, name: "XVIII Asamblea Ordinaria de CMAP", file: "/public/documentos/18.pdf" },
  { order: 6, name: "Acuerdos Aprobados en la XVIII Asamblea Ordinaria de CMAP", file: "/public/documentos/18 Acuerdos.pdf" },
  { order: 7, name: "Bases Constitutivas y Manual de GestorÃ­a", file: "/public/documentos/18 Bases.pdf" },
  { order: 8, name: "XIX Asamblea Ordinaria de CMAP", file: "/public/documentos/19.pdf" },
  { order: 9, name: "Acuerdos Aprobados en la XIX Asamblea Ordinaria de CMAP", file: "/public/documentos/19 Acuerdos.pdf" },
  { order: 10, name: "XIX Asamblea Ordinaria de CMAP Informe", file: "/public/documentos/19 Informe.pdf" },
  { order: 11, name: "XX Asamblea Ordinaria de CMAP Informe", file: "/public/documentos/20.pdf" },
  { order: 12, name: "XXI Asamblea Ordinaria de CMAP Informe", file: "/public/documentos/21.pdf" },
  { order: 13, name: "XXII Asamblea Ordinaria de CMAP Informe", file: "/public/documentos/22.pdf" },
  { order: 14, name: "XXII Asamblea Ordinaria de CMAP Informe", file: "/public/documentos/22 Extraordinario.pdf" },
  { order: 15, name: "XXIII Asamblea Ordinaria de CMAP Informe", file: "/public/documentos/23.pdf" },
  { order: 16, name: "CatÃ¡logo de Servicios Financieros de CMAP SNTE 54", file: "/public/documentos/25 Catalogo de Servicios.pdf" },
];

// ========= Helpers de estilos (gradientes por slider y CTA semÃ¡ntico) =========
const portadaGrad = {
 formatos:
  "bg-[linear-gradient(to_bottom_right,var(--color-cmap-naranja-50),var(--color-cmap-naranja-50))] " +
  "bg-[radial-gradient(120%_120%_at_80%_0%,var(--color-cmap-naranja-100)_0%,transparent_60%),radial-gradient(120%_120%_at_0%_100%,var(--color-cmap-naranja-100)_0%,transparent_60%)]",
comunicados:
    "bg-[linear-gradient(to_bottom_right,#fff,var(--color-cmap-crema-50))] " +
    "bg-[radial-gradient(110%_110%_at_10%_0%,var(--color-cmap-naranja-100)_0%,transparent_60%),radial-gradient(110%_110%_at_100%_100%,var(--color-cmap-naranja-100)_0%,transparent_60%)]",
  asambleas:
    "bg-[linear-gradient(to_bottom_right,var(--color-cmap-crema-50),#fff)] " +
    "bg-[radial-gradient(110%_110%_at_100%_0%,var(--color-cmap-naranja-oscuro-100)_0%,transparent_60%),radial-gradient(110%_110%_at_0%_100%,var(--color-cmap-naranja-100)_0%,transparent_60%)]",
};

const ctaGrad = {
  formatos:
    "bg-gradient-to-r from-[var(--color-cmap-naranja-500)] to-[var(--color-cmap-naranja-700)] hover:from-[var(--color-cmap-naranja-600)] hover:to-[var(--color-cmap-naranja-800)]",
 comunicados:
    "bg-gradient-to-r from-[var(--color-cmap-verde-600)] to-[var(--color-cmap-verde-700)] hover:from-[var(--color-cmap-verde-700)] hover:to-[var(--color-cmap-verde-800)]",
  asambleas:
    "bg-gradient-to-r from-[var(--color-cmap-cafe-600)] to-[var(--color-cmap-cafe-800)] hover:from-[var(--color-cmap-cafe-700)] hover:to-[var(--color-cmap-cafe-900)]",
};

// CTA por tipo dentro de Formatos
const ctaFormato = (name: string) => {
  return ctaGrad.formatos;                                   // naranja
};

// Colores de icono por slider
const iconColor = {
  formatos: "text-[color:var(--color-cmap-naranja-600)]",
  comunicados: "text-[color:var(--color-cmap-verde-700)]",
  asambleas: "text-[color:var(--color-cmap-cafe-700)]",
};

// Chip translÃºcido reutilizable
const chip =
  "w-20 h-20 rounded-2xl shadow-lg flex items-center justify-center mb-4 mx-auto " +
  "bg-[linear-gradient(to_bottom_right,rgba(255,255,255,.95),rgba(255,255,255,.75))] " +
  "group-hover:scale-110 transition-transform";
---

<BaseLayout title="Documentos">
  <div class="container mx-auto px-4 py-12 max-w-7xl">
    <!-- Header -->
    <header class="text-center mb-16">
        <h1 transition:name="page-title" class="text-5xl md:text-6xl font-bold text-gray-900 mb-4">
          Documentos
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">Consulta nuestros formatos, comunicados oficiales y actas de asambleas</p>
    </header>

    <!-- ========================= Formatos ========================= -->
    <section class="mb-20">
      <div class="flex items-center mb-8 space-x-4">
        <div class="w-12 h-12 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-br from-[var(--color-cmap-naranja)] to-[var(--color-cmap-naranja-700)]">
          <span class="text-2xl">ðŸ“‹</span>
        </div>
        <div>
          <h2 class="text-3xl font-bold text-gray-900">Formatos</h2>
          <p class="text-gray-600">Solicitudes de formatos oficiales</p>
        </div>
      </div>

      <div class="relative overflow-hidden py-8">
        <div class="slider-asambleas flex gap-6 animate-scroll-right">
          {formatos.concat(formatos).map((doc) => (
         <a
           href={doc.file}
           target="_blank"
           rel="noopener noreferrer"
           class="doc-card flex-shrink-0 w-80 h-96 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden group border-2 border-gray-200 hover:border-[color:var(--color-cmap-naranja-700)]"
          >
              <div class="h-full flex flex-col">
                <!-- Portada -->
                <div class={`flex-1 p-8 relative overflow-hidden ${portadaGrad.formatos}`}>
                  <div class="relative z-10 h-full flex flex-col">
                    <div class="flex-1 flex items-center justify-center">
                      <div class="text-center">
                        <div class={chip}>
                          <svg class={`w-10 h-10 ${iconColor.formatos}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                          </svg>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 group-hover:text-[color:var(--color-cmap-naranja-700)] transition-colors">{doc.name}</h3>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- CTA -->
                <div class={`p-4 text-white text-center transition-all bg-gradient-to-r from-[var(--color-cmap-naranja-500)] to-[var(--color-cmap-naranja-600)] hover:from-[var(--color-cmap-naranja-600)] hover:to-[var(--color-cmap-naranja-700)]${doc.name}`}>
                  <p class="font-semibold text-sm flex items-center justify-center space-x-2">
                    <span>Ver Formato</span>
                    <svg class="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                  </p>
                </div>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>

    <!-- ===================== Comunicados y Avisos ===================== -->
    <section class="mb-20">
      <div class="flex items-center mb-8 space-x-4">
        <div class="w-12 h-12 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-br from-[var(--color-cmap-verde-600)] to-[var(--color-cmap-verde-700)]">
          <span class="text-2xl">ðŸ“¢</span>
        </div>
        <div>
          <h2 class="text-3xl font-bold text-gray-900">Comunicados y Avisos</h2>
          <p class="text-gray-600">InformaciÃ³n oficial y actualizaciones</p>
        </div>
      </div>

      <div class="relative overflow-hidden py-8">
        <div class="slider-comunicados flex gap-6 animate-scroll-left">
          {comunicados.concat(comunicados).map((doc) => (
            <a
              href={doc.file}
              target="_blank"
              rel="noopener noreferrer"
              class="doc-card flex-shrink-0 w-80 h-96 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden group border-2 border-gray-200 hover:border-[color:var(--color-cmap-verde-600)]"
            >
              <div class="h-full flex flex-col">
                <!-- Portada -->
                <div class={`flex-1 p-8 relative overflow-hidden ${portadaGrad.comunicados}`}>
                  <div class="relative z-10 h-full flex flex-col">
                    <div class="flex-1 flex items-center justify-center">
                      <div class="text-center">
                        <div class={chip}>
                          <svg class={`w-10 h-10 ${iconColor.comunicados}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                          </svg>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 group-hover:text-[color:var(--color-cmap-verde-700)] transition-colors">{doc.name}</h3>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- CTA -->
                <div class={`p-4 text-white text-center transition-all ${ctaGrad.comunicados}`}>
                  <p class="font-semibold text-sm flex items-center justify-center space-x-2">
                    <span>Ver Documento</span>
                    <svg class="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                  </p>
                </div>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>

    <!-- ===================== Asambleas y Acuerdos ===================== -->
    <section>
      <div class="flex items-center mb-8 space-x-4">
        <div class="w-12 h-12 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-br from-[var(--color-cmap-cafe-600)] to-[var(--color-cmap-cafe-700)]">
          <span class="text-2xl">ðŸ“‹</span>
        </div>
        <div>
          <h2 class="text-3xl font-bold text-gray-900">Asambleas y Acuerdos</h2>
          <p class="text-gray-600">Actas y resoluciones oficiales</p>
        </div>
      </div>

      <div class="relative overflow-hidden py-8">
        <div class="slider-asambleas flex gap-6 animate-scroll-right">
          {asambleas.concat(asambleas).map((doc) => (
            <a
              href={doc.file}
              target="_blank"
              rel="noopener noreferrer"
              class="doc-card flex-shrink-0 w-80 h-96 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden group border-2 border-gray-200 hover:border-[color:var(--color-cmap-cafe-600)]"
            >
              <div class="h-full flex flex-col">
                <!-- Portada -->
                <div class={`flex-1 p-8 relative overflow-hidden ${portadaGrad.asambleas}`}>
                  <div class="relative z-10 h-full flex flex-col">
                    <div class="flex-1 flex items-center justify-center">
                      <div class="text-center">
                        <div class={chip}>
                          <svg class={`w-10 h-10 ${iconColor.asambleas}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                          </svg>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 group-hover:text-[color:var(--color-cmap-cafe-700)] transition-colors">{doc.name}</h3>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- CTA -->
                <div class={`p-4 text-white text-center transition-all ${ctaGrad.asambleas}`}>
                  <p class="font-semibold text-sm flex items-center justify-center space-x-2">
                    <span>Ver Documento</span>
                    <svg class="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                  </p>
                </div>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>
  </div>
</BaseLayout>

<style>
  @keyframes scroll-left {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
  @keyframes scroll-right {
    0% { transform: translateX(-50%); }
    100% { transform: translateX(0); }
  }
  .animate-scroll-left { animation: scroll-left 30s linear infinite; }
  .animate-scroll-right { animation: scroll-right 30s linear infinite; }

  .slider-comunicados:hover,
  .slider-asambleas:hover {
    animation-play-state: paused;
  }
  .doc-card:hover {
    transform: scale(1.05);
    z-index: 10;
  }

  /* Fundido lateral de cada carrusel */
  .relative.overflow-hidden::before,
  .relative.overflow-hidden::after {
    content: '';
    position: absolute;
    top: 0; bottom: 0;
    width: 100px;
    z-index: 10;
    pointer-events: none;
  }
  .relative.overflow-hidden::before {
    left: 0;
    background: linear-gradient(to right, rgb(249, 250, 251), transparent);
  }
  .relative.overflow-hidden::after {
    right: 0;
    background: linear-gradient(to left, rgb(249, 250, 251), transparent);
  }
</style>

<script>
  // Pausar/reanudar el carrusel cuando el mouse entra/sale sobre una card
  document.querySelectorAll('.doc-card').forEach((card) => {
    card.addEventListener('mouseenter', () => {
      const slider = card.closest('.slider-comunicados, .slider-asambleas') as HTMLElement;
      if (slider) slider.style.animationPlayState = 'paused';
    });
    card.addEventListener('mouseleave', () => {
      const slider = card.closest('.slider-comunicados, .slider-asambleas') as HTMLElement;
      if (slider) slider.style.animationPlayState = 'running';
    });
  });
</script>
